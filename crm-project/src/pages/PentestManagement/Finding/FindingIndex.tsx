import { useParams } from "react-router";
import { useGetInProgressProjectByIdQuery } from "../../../service/pentest";
import FindingForm from "./FindingForm";
import FindingTable from "./FindingTable";
import { useEffect } from "react";
import { useDispatch } from "react-redux";
import { setURL } from "../../../features/pentest";

function FindingIndex() {
    const dispatch = useDispatch();
    const {id} = useParams()
    const {data, } = useGetInProgressProjectByIdQuery({
        pk: Number(id)
    })

    useEffect(() => {
        if(data){
            dispatch(setURL(data))
        }
    }, [data, dispatch]);
    
    return ( 
        <div className="grid md:grid-cols-2 gap-4">
            <FindingTable />
            <FindingForm />
        </div>
     );
}

export default FindingIndex;